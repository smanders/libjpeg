# CMake file for the LJPEG @bits@ bits lib
INCLUDE_DIRECTORIES(BEFORE
  ${CMAKE_CURRENT_BINARY_DIR}
  ${LJPEG_SOURCE_DIR}
)

ADD_DEFINITIONS(-DCMAKE_BITS_IN_JSAMPLE=@bits@)
IF(@bits@ EQUAL 8)
ADD_DEFINITIONS(-DBMP_SUPPORTED)
ADD_DEFINITIONS(-DTARGA_SUPPORTED)
ENDIF(@bits@ EQUAL 8)

ADD_LIBRARY(${LJPEG_LIBRARY_NAME}@bits@ ${LJPEG_SOURCES})
IF(UNIX)
  TARGET_LINK_LIBRARIES(${LJPEG_LIBRARY_NAME}@bits@ m)
ENDIF(UNIX)
SET_TARGET_PROPERTIES(${LJPEG_LIBRARY_NAME}@bits@ PROPERTIES ${LJPEG_LIBRARY_PROPERTIES})

ADD_EXECUTABLE(cjpeg@bits@ ${CJPEG_SOURCES})
TARGET_LINK_LIBRARIES(cjpeg@bits@ ${LJPEG_LIBRARY_NAME}@bits@)

ADD_EXECUTABLE(djpeg@bits@ ${DJPEG_SOURCES})
TARGET_LINK_LIBRARIES(djpeg@bits@ ${LJPEG_LIBRARY_NAME}@bits@)

ADD_EXECUTABLE(rdjpgcom@bits@ ${RDJPGCOM_SOURCES})
TARGET_LINK_LIBRARIES(rdjpgcom@bits@ ${LJPEG_LIBRARY_NAME}@bits@)

ADD_EXECUTABLE(wrjpgcom@bits@ ${RDJPGCOM_SOURCES})
TARGET_LINK_LIBRARIES(wrjpgcom@bits@ ${LJPEG_LIBRARY_NAME}@bits@)

ADD_EXECUTABLE(jpegtran@bits@ ${JPEGTRAN_SOURCES})
TARGET_LINK_LIBRARIES(jpegtran@bits@ ${LJPEG_LIBRARY_NAME}@bits@)

# lib + exe:
IF(NOT JPEG_INSTALL_NO_LIBRARIES)
  INSTALL(TARGETS 
    ${LJPEG_LIBRARY_NAME}@bits@
    cjpeg@bits@
    djpeg@bits@
    jpegtran@bits@
    rdjpgcom@bits@
    RUNTIME DESTINATION ${LJPEG_INSTALL_BIN_DIR} COMPONENT Runtime
    LIBRARY DESTINATION ${LJPEG_INSTALL_LIB_DIR} COMPONENT Runtime ${NAMELINK_SKIP}
    ARCHIVE DESTINATION ${LJPEG_INSTALL_LIB_DIR} COMPONENT Development
  )
ENDIF(NOT JPEG_INSTALL_NO_LIBRARIES)

# header file
IF(NOT LJPEG_INSTALL_NO_DEVELOPMENT)
  FILE(GLOB header_files "${LJPEG_SOURCE_DIR}/*.h")
  INSTALL(FILES ${header_files}
    DESTINATION ${LJPEG_INSTALL_INCLUDE_DIR}/@bits@ COMPONENT Development
  )
ENDIF(NOT LJPEG_INSTALL_NO_DEVELOPMENT)

